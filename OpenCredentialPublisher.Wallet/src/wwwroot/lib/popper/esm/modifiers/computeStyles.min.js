import{top,left,right,bottom}from"../enums.js";import getOffsetParent from"../dom-utils/getOffsetParent.js";import getWindow from"../dom-utils/getWindow.js";import getDocumentElement from"../dom-utils/getDocumentElement.js";import getComputedStyle from"../dom-utils/getComputedStyle.js";import getBasePlacement from"../utils/getBasePlacement.js";import{round}from"../utils/math.js";var unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function roundOffsetsByDPR(t){var e=t.x,o=t.y,s=window.devicePixelRatio||1;return{x:round(round(e*s)/s)||0,y:round(round(o*s)/s)||0}}export function mapToStyles(t){var e,o=t.popper,s=t.popperRect,p=t.placement,r=t.offsets,i=t.position,a=t.gpuAcceleration,n=t.adaptive,l=t.roundOffsets,f=!0===l?roundOffsetsByDPR(r):"function"==typeof l?l(r):r,m=f.x,d=void 0===m?0:m,u=f.y,c=void 0===u?0:u,g=r.hasOwnProperty("x"),y=r.hasOwnProperty("y"),O=left,v=top,b=window;if(n){var j=getOffsetParent(o),h="clientHeight",w="clientWidth";j===getWindow(o)&&(j=getDocumentElement(o),"static"!==getComputedStyle(j).position&&(h="scrollHeight",w="scrollWidth")),j=j,p===top&&(v=bottom,c-=j[h]-s.height,c*=a?1:-1),p===left&&(O=right,d-=j[w]-s.width,d*=a?1:-1)}var x,P=Object.assign({position:i},n&&unsetSides);return a?Object.assign({},P,((x={})[v]=y?"0":"",x[O]=g?"0":"",x.transform=(b.devicePixelRatio||1)<2?"translate("+d+"px, "+c+"px)":"translate3d("+d+"px, "+c+"px, 0)",x)):Object.assign({},P,((e={})[v]=y?c+"px":"",e[O]=g?d+"px":"",e.transform="",e))};function computeStyles(t){var e=t.state,o=t.options,s=o.gpuAcceleration,p=void 0===s||s,r=o.adaptive,i=void 0===r||r,a=o.roundOffsets,n=void 0===a||a,l={placement:getBasePlacement(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:p};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,mapToStyles(Object.assign({},l,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:i,roundOffsets:n})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,mapToStyles(Object.assign({},l,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:n})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}export default{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:computeStyles,data:{}};